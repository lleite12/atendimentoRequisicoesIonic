{"version":3,"sources":["./src/app/cons-req/cons-req.page.html","./src/app/cons-req/cons-req-routing.module.ts","./src/app/cons-req/cons-req.module.ts","./src/app/cons-req/cons-req.page.scss","./src/app/cons-req/cons-req.page.ts"],"names":[],"mappings":"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","file":"cons-req-cons-req-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Consulta</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <ion-card-content>\\n\\n    <ion-grid fixed>\\n      <ion-row>\\n        <ion-col size=\\\"9\\\">\\n          <ion-input type=\\\"number\\\" (dblclick)=\\\"scanCode()\\\" [(ngModel)]=\\\"requisicao\\\" placeholder=\\\"Documento\\\"></ion-input>\\n        </ion-col>\\n        <ion-col size=\\\"3\\\">\\n          <ion-button (click)=\\\"selecionar()\\\" expand=\\\"block\\\" fill=\\\"clear\\\" shape=\\\"round\\\">\\n            Buscar\\n          </ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n\\n  </ion-card-content>\\n\\n  <div style=\\\"overflow-x: scroll;\\\">\\n    <table id='minhaTabela' style=\\\"min-width: 100%;\\\">\\n      <thead>\\n        <tr>\\n          <th>T</th>\\n          <th>Doc.</th>\\n          <th>Est</th>\\n          <th>Data</th>\\n          <th>Req</th>\\n        <tr>\\n      </thead>\\n      <tbody>\\n        <tr *ngFor=\\\"let r of requisicoes\\\" (click)=\\\"selLinha(r)\\\" [style.background-color]=\\\"r == regSel ? '#aff7ff':''\\\">\\n          <td>{{r[\\\"tipo-req\\\"]}}</td>\\n          <td>{{r[\\\"cod-doc\\\"]}}</td>\\n          <td>{{r[\\\"cod-estabel\\\"]}}</td>\\n          <td>{{r[\\\"data-req\\\"]}}</td>\\n          <td>{{r[\\\"nome-req\\\"]}}</td>\\n        </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n</ion-content>\\n<br>\\n<ion-footer>\\n  <ion-toolbar>\\n    <ion-button (click)=\\\"atender()\\\" expand=\\\"block\\\" fill=\\\"clear\\\" shape=\\\"round\\\">\\n      Atender\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-footer>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ConsReqPage } from './cons-req.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ConsReqPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ConsReqPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ConsReqPageRoutingModule } from './cons-req-routing.module';\n\nimport { ConsReqPage } from './cons-req.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ConsReqPageRoutingModule\n  ],\n  declarations: [ConsReqPage]\n})\nexport class ConsReqPageModule {}\n","export default \"@charset \\\"UTF-8\\\";\\n#minhaTabela {\\n  margin: 0 auto;\\n  border: 0;\\n  box-shadow: 0 5px 30px darkgrey;\\n  border-spacing: 0;\\n}\\n#minhaTabela thead th {\\n  font-weight: bold;\\n  background-color: #2584bb;\\n  color: white;\\n  padding: 5px 10px;\\n}\\n#minhaTabela tr td {\\n  width: 80%;\\n  padding: 5px 10px;\\n  text-align: center;\\n  cursor: pointer;\\n  /**importante para não mostrar cursor de texto**/\\n}\\n#minhaTabela tr td:last-child {\\n  text-align: right;\\n}\\n/**Cores**/\\n#minhaTabela tr:nth-child(odd) {\\n  background-color: #eee;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29ucy1yZXEvY29ucy1yZXEucGFnZS5zY3NzIiwic3JjL2FwcC9jb25zLXJlcS9DOlxcYXBwc1xcYXBwLXNhbm92b1xcQXV0b21hY2FvTWF0ZXJpYWlzL3NyY1xcYXBwXFxjb25zLXJlcVxcY29ucy1yZXEucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGdCQUFnQjtBQ0FoQjtFQUNJLGNBQUE7RUFDQSxTQUFBO0VBQ0EsK0JBQUE7RUFDQSxpQkFBQTtBREVKO0FDQ0U7RUFDRSxpQkFBQTtFQUNBLHlCQUFBO0VBQ0EsWUFBQTtFQUVBLGlCQUFBO0FEQ0o7QUNFRTtFQUNFLFVBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0VBRUEsZUFBQTtFQUFpQixnREFBQTtBRENyQjtBQ0VFO0VBQ0UsaUJBQUE7QURDSjtBQ0VFLFVBQUE7QUFDQTtFQUNFLHNCQUFBO0FEQ0oiLCJmaWxlIjoic3JjL2FwcC9jb25zLXJlcS9jb25zLXJlcS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAY2hhcnNldCBcIlVURi04XCI7XG4jbWluaGFUYWJlbGEge1xuICBtYXJnaW46IDAgYXV0bztcbiAgYm9yZGVyOiAwO1xuICBib3gtc2hhZG93OiAwIDVweCAzMHB4IGRhcmtncmV5O1xuICBib3JkZXItc3BhY2luZzogMDtcbn1cblxuI21pbmhhVGFiZWxhIHRoZWFkIHRoIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGJhY2tncm91bmQtY29sb3I6ICMyNTg0YmI7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgcGFkZGluZzogNXB4IDEwcHg7XG59XG5cbiNtaW5oYVRhYmVsYSB0ciB0ZCB7XG4gIHdpZHRoOiA4MCU7XG4gIHBhZGRpbmc6IDVweCAxMHB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgLyoqaW1wb3J0YW50ZSBwYXJhIG7Do28gbW9zdHJhciBjdXJzb3IgZGUgdGV4dG8qKi9cbn1cblxuI21pbmhhVGFiZWxhIHRyIHRkOmxhc3QtY2hpbGQge1xuICB0ZXh0LWFsaWduOiByaWdodDtcbn1cblxuLyoqQ29yZXMqKi9cbiNtaW5oYVRhYmVsYSB0cjpudGgtY2hpbGQob2RkKSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XG59IiwiI21pbmhhVGFiZWxhe1xyXG4gICAgbWFyZ2luOjAgYXV0bztcclxuICAgIGJvcmRlcjowO1xyXG4gICAgYm94LXNoYWRvdzogMCA1cHggMzBweCBkYXJrZ3JleTtcclxuICAgIGJvcmRlci1zcGFjaW5nOiAwO1xyXG4gIH1cclxuICBcclxuICAjbWluaGFUYWJlbGEgdGhlYWQgdGh7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigzNywgMTMyLCAxODcpO1xyXG4gICAgY29sb3I6d2hpdGU7XHJcbiAgICBcclxuICAgIHBhZGRpbmc6NXB4IDEwcHg7XHJcbiAgfVxyXG4gIFxyXG4gICNtaW5oYVRhYmVsYSB0ciB0ZHtcclxuICAgIHdpZHRoOjgwJTtcclxuICAgIHBhZGRpbmc6NXB4IDEwcHg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBcclxuICAgIGN1cnNvcjogcG9pbnRlcjsgLyoqaW1wb3J0YW50ZSBwYXJhIG7Do28gbW9zdHJhciBjdXJzb3IgZGUgdGV4dG8qKi9cclxuICB9XHJcbiAgXHJcbiAgI21pbmhhVGFiZWxhIHRyIHRkOmxhc3QtY2hpbGR7XHJcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcclxuICB9XHJcbiAgXHJcbiAgLyoqQ29yZXMqKi9cclxuICAjbWluaGFUYWJlbGEgdHI6bnRoLWNoaWxkKG9kZCl7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO1xyXG4gIH1cclxuXHJcbiJdfQ== */\"","//Desenvolvido por: lucas Leite - INSTI\nimport { Component, OnInit } from '@angular/core';\nimport { AppModule } from '../app.module';\nimport { NavController } from '@ionic/angular';\nimport { AlertController } from '@ionic/angular';\nimport { BarcodeScannerOptions, BarcodeScanner } from \"@ionic-native/barcode-scanner/ngx\";\nimport { HTTP } from '@ionic-native/http/ngx';\nimport { Platform, LoadingController } from '@ionic/angular';\nimport { Location, formatDate } from'@angular/common'; \n\nimport xml2js from 'xml2js';\n\n@Component({\n  selector: 'app-cons-req',\n  templateUrl: './cons-req.page.html',\n  styleUrls: ['./cons-req.page.scss'],\n})\n\nexport class ConsReqPage implements OnInit {\n\n  barcodeScannerOptions: BarcodeScannerOptions;\n\n  headers: Headers = new Headers({ \"Content-Type\": \"application/x-www-form-urlencoded\" });\n  testBaseURL;\n  param: any;\n  param2;\n  token: any = null;\n\n  loading: any;\n\n  resultados: any;\n  retorno: any;\n  VALUE1: any;\n\n  requisicoes: any[] = [];\n\n  regSel: any;\n  scannedData: {};\n  requisicao: any;\n  \n  constructor(public alertController: AlertController,\n    public navCtrl: NavController,\n    public loadingCtrl: LoadingController,\n    private barcodeScanner: BarcodeScanner,\n    private nativeHttp: HTTP) {\n\n    this.testBaseURL = AppModule.getBase();\n\n    this.param = `<s11:Envelope xmlns:s11='http://schemas.xmlsoap.org/soap/envelope/'>\n      <s11:Body>\n        <ns1:userLogin xmlns:ns1='http://service.execbo.ws.framework.totvs.com'>\n    <!-- optional -->\n          <arg0>super</arg0>\n        </ns1:userLogin>\n      </s11:Body>\n    </s11:Envelope>`;\n\n    //this.getDataNative();\n\n    // Options\n    this.barcodeScannerOptions = {\n      showTorchButton: true,\n      showFlipCameraButton: true\n    };\n\n  }\n\n  scanCode() {\n\n    this.barcodeScanner\n      .scan()\n      .then(barcodeData => {\n        JSON.stringify(barcodeData);\n        this.scannedData = barcodeData;\n        this.requisicao = this.scannedData[\"text\"];\n        if (this.requisicao != null) {\n          this.selecionar();\n        }\n\n      })\n      .catch(err => {\n        console.log(\"Error\", err);\n      });\n\n  }\n\n  selecionar() {\n\n    var requisicao = this.requisicao;\n\n    var selecionado = this.requisicoes.find(function (key) {\n      // key: the name of the object key\n      // index: the ordinal position of the key within the object \n\n      if (requisicao != null)\n        return key[\"cod-doc\"] == requisicao.toString();\n\n    });\n\n    if (selecionado == null)\n      this.erroAlert('Registro não encontrado!','Registro não encontrado para o documento informado!');\n\n    this.selLinha(selecionado);\n\n    if(this.regSel != null)\n      this.atender();\n\n  };\n\n  async erroAlert(header,mes) {\n    const alert = await this.alertController.create({\n      header: header,\n      subHeader: '',\n      message: mes,\n      buttons: ['OK']\n    });\n\n    await alert.present();\n  }\n\n  selLinha(linha) {\n\n    this.regSel = linha;\n\n  }\n\n  atender() {\n\n    if (this.regSel == null) {\n      this.erroAlert('Nenhum registro!','Favor selecionar um registro do browse!');\n      return \"NOK\";\n    }\n\n    AppModule.setReg(this.regSel);\n\n    this.navCtrl.navigateForward(\"atendReq\");\n\n  }\n\n  getDataNative() {\n\n    this.nativeHttp.setDataSerializer('utf8');\n\n    let nativeCall = this.nativeHttp.post(this.testBaseURL, this.param, {\n      'Content-Type': 'text/xml'\n    }).then(data => {      \n\n      this.showSpinner();\n      let aux: string = data.data;\n\n       this.convertXmltoJson(aux, 0);\n\n    }).catch(err => {\n\n      this.hideSpinner();\n      this.erroAlert(\"Erro na conexão!\",\"Houveram problemas na conexão com o webservice, favor verificar se está conectado na rede wifi/VPN correta ou verificar com a T.I!\")\n\n    }\n    );\n\n    this.hideSpinner();\n\n  }\n\n  convertXmltoJson(data, op): void {\n    xml2js.parseString(data, { explicitArray: false }, (error, result) => {\n      if (error) {\n        throw new Error(error);\n      } else {\n\n        this.token = result[\"env:Envelope\"][\"env:Body\"][\"ns2:userLoginResponse\"].return;\n\n        this.getCallProcedure();\n\n      }\n    });\n  }\n\n  getCallProcedure(){\n\n    this.requisicoes = [];\n    \n    this.param2 = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:ser=\"http://service.execbo.ws.framework.totvs.com\">\n                  <soapenv:Header/>\n                  <soapenv:Body>\n                    <ser:callProcedureWithToken>\n                        <arg0>` + this.token + `</arg0>\n                        <!--Optional:-->\n                        <arg1>esp/esapp001.p</arg1>\n                        <!--Optional:-->\n                        <arg2>busca-requisicao</arg2>\n                        <!--Optional:-->\n                        <arg3>\n                        [\n                                {\"dataType\":\"temptable\",\"name\":\"tt-param\",\"type\":\"input\",\"value\":{\"name\":\"tt-param\",\"fields\":[\n                                              {\"name\":\"data-ini\",\"label\":\"data-ini\",\"type\":\"date\"},\n                                              {\"name\":\"data-fim\",\"label\":\"data-fim\",\"type\":\"date\"},\n                                              {\"name\":\"cod-doc-ini\",\"label\":\"cod-doc-ini\",\"type\":\"integer\"},\n                                              {\"name\":\"cod-doc-fim\",\"label\":\"cod-doc-fim\",\"type\":\"integer\"},\n                                              {\"name\":\"tipo-doc\",\"label\":\"tipo-doc\",\"type\":\"integer\"},\n                                              {\"name\":\"nome-req-ini\",\"label\":\"nome-req-ini\",\"type\":\"character\"},\n                                              {\"name\":\"nome-req-fim\",\"label\":\"nome-req-fim\",\"type\":\"character\"},                                \n                                              {\"name\":\"cd-estab\",\"label\":\"cd-estab\",\"type\":\"character\"}\n                                ],\"records\":[\n                                              {\"data-ini\":\"` + formatDate(AppModule.getDtIni(), 'dd/MM/yyyy', 'en-US') + `\", \"data-fim\":\"` + formatDate(AppModule.getDtFim(), 'dd/MM/yyyy', 'en-US') + `\", \"cod-doc-ini\":` + AppModule.getDocIni() + `, \"cod-doc-fim\":` + AppModule.getDocFim() + `, \"tipo-doc\":` + AppModule.getTipo() + `, \"nome-req-ini\":\"` + AppModule.getReqIni() + `\", \"nome-req-fim\":\"` + AppModule.getReqFim() + `\", \"cd-estab\":\"` + AppModule.getEstabel() + `\"}\n                                ]}},\n                                {\"dataType\":\"temptable\",\"name\":\"tt-requisicao\",\"type\":\"output\",\"value\":{\"name\":\"tt-requisicao\",\"fields\":[\n                                  {\"name\":\"tipo-req\",\"label\":\"tipo-req\",\"type\":\"character\"},\n                                  {\"name\":\"cod-doc\",\"label\":\"cod-doc\",\"type\":\"integer\"},\n                                  {\"name\":\"cod-estabel\",\"label\":\"cod-estabel\",\"type\":\"character\"},\n                                  {\"name\":\"data-req\",\"label\":\"data-req\",\"type\":\"date\"},\n                                  {\"name\":\"nome-req\",\"label\":\"nome-req\",\"type\":\"character\"}\n                                ],\"records\":[]}},\n                                {\"dataType\":\"character\",\"name\":\"p-c-ret\",\"type\":\"output\"}\n                    ]\n                        </arg3><!--Optional:-->\n                        \n                    </ser:callProcedureWithToken>\n                  </soapenv:Body>\n              </soapenv:Envelope>`;\n\n    this.nativeHttp.setDataSerializer('utf8');\n\n    let nativeCall = this.nativeHttp.post(this.testBaseURL, this.param2, {\n      'Content-Type': 'text/xml'\n    }).then(data => {\n      // this.fazendosinc = \"Sincronizando o sistema... Aguarde!\";\n\n      console.log(\"Dados:\" + data.data);\n\n      let aux: string = data.data;\n\n      xml2js.parseString(aux, { explicitArray: false }, (error, result) => {\n        if (error) {\n          throw new Error(error);\n        } else {\n\n          this.resultados = result[\"env:Envelope\"][\"env:Body\"][\"ns2:callProcedureWithTokenResponse\"].return;\n\n          console.log(\"resultados:\" + this.resultados);\n\n          let encontrou = 0\n\n\n          this.retorno = JSON.parse(this.resultados);\n          console.log(this.retorno);\n\n          this.VALUE1 = JSON.parse(this.retorno[0].value);\n\n          var i = 0;          \n          this.VALUE1.records.forEach(dtDocs => {\n            \n            encontrou = 1;            \n            \n            dtDocs[\"data-req\"] = dtDocs[\"data-req\"].substring(0,10);\n            this.requisicoes.push(dtDocs);\n          });\n\n          this.hideSpinner();\n\n          if (encontrou == 0) {            \n            this.erroAlert(\"Erro!\",this.retorno[1].value);\n          }\n\n        }\n      });\n    \n    }).catch(err => {\n\n      this.hideSpinner();\n      this.erroAlert(\"ERRO!\", err)\n\n    }\n    );\n\n  }\n\n  ngOnInit() {\n\n    //this.getDataNative();\n\n  }\n\n  ionViewWillEnter() {\n\n    this.getDataNative();\n\n  }\n\n  async showSpinner() {\n    this.loading = await this.loadingCtrl.create({\n      message: \"Aguarde...\",\n      spinner: \"circles\",\n    });\n\n    this.loading.present();\n    \n  }\n\n  async hideSpinner() {\n\n    this.loading.dismiss();\n\n  }\n\n}"],"sourceRoot":"webpack:///"}